<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡ - AIZONIQ Academy</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Moyasar Payment -->
    <link rel="stylesheet" href="https://cdn.moyasar.com/mpf/1.14.0/moyasar.css">
    <script src="https://cdn.moyasar.com/mpf/1.14.0/moyasar.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background: #0a0a0f;
            color: #fff;
            min-height: 100vh;
            direction: rtl;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(at 20% 20%, rgba(99, 102, 241, 0.15) 0px, transparent 50%),
                radial-gradient(at 80% 80%, rgba(139, 92, 246, 0.1) 0px, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        
        .checkout-wrapper {
            position: relative;
            z-index: 1;
            max-width: 1100px;
            margin: 0 auto;
            padding: 40px 24px;
        }
        
        /* Header */
        .checkout-header {
            text-align: center;
            margin-bottom: 48px;
        }
        
        .logo {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 8px;
        }
        
        .logo .ai {
            background: linear-gradient(135deg, #6366f1, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .checkout-header p {
            color: #71717a;
        }
        
        /* Progress Steps */
        .progress-steps {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin-bottom: 48px;
            position: relative;
        }
        
        .progress-steps::before {
            content: '';
            position: absolute;
            top: 24px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            position: relative;
            z-index: 1;
        }
        
        .step-circle {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }
        
        .step.active .step-circle {
            background: linear-gradient(135deg, #6366f1, #a855f7);
            border-color: #6366f1;
        }
        
        .step.completed .step-circle {
            background: #10b981;
            border-color: #10b981;
        }
        
        .step-label {
            font-size: 0.9rem;
            color: #71717a;
            transition: color 0.3s;
        }
        
        .step.active .step-label,
        .step.completed .step-label {
            color: #fff;
        }
        
        /* Main Grid */
        .checkout-grid {
            display: grid;
            grid-template-columns: 1.2fr 1fr;
            gap: 40px;
        }
        
        @media (max-width: 900px) {
            .checkout-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Cards */
        .checkout-card {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 24px;
            padding: 36px;
        }
        
        .card-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 28px;
        }
        
        .card-title i {
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(99, 102, 241, 0.1);
            border-radius: 12px;
            color: #6366f1;
        }
        
        /* Form */
        .form-group {
            margin-bottom: 24px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: #e4e4e7;
        }
        
        .form-group label .required {
            color: #ef4444;
        }
        
        .form-input {
            width: 100%;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 14px;
            font-size: 1rem;
            font-family: inherit;
            color: #fff;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.15);
        }
        
        .form-input::placeholder {
            color: #52525b;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        @media (max-width: 500px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }
        
        select.form-input {
            cursor: pointer;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236366f1'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left 16px center;
            background-size: 20px;
            padding-left: 48px;
        }
        
        select.form-input option {
            background: #1a1a2e;
            color: #fff;
            padding: 12px;
        }
        
        /* Error State */
        .form-group.error .form-input {
            border-color: #ef4444;
        }
        
        .error-text {
            color: #ef4444;
            font-size: 0.85rem;
            margin-top: 8px;
            display: none;
        }
        
        .form-group.error .error-text {
            display: block;
        }
        
        /* Buttons */
        .btn-next {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border: none;
            border-radius: 14px;
            font-size: 1.1rem;
            font-weight: 700;
            color: #fff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-family: inherit;
            transition: all 0.3s;
        }
        
        .btn-next:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.3);
        }
        
        .btn-back {
            width: 100%;
            padding: 14px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 14px;
            font-size: 1rem;
            font-weight: 600;
            color: #a1a1aa;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-family: inherit;
            margin-top: 12px;
            transition: all 0.3s;
        }
        
        .btn-back:hover {
            background: rgba(255, 255, 255, 0.06);
        }
        
        /* Order Summary */
        .order-product {
            display: flex;
            gap: 20px;
            padding-bottom: 24px;
            margin-bottom: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }
        
        .product-icon {
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1));
            border-radius: 16px;
            font-size: 2rem;
            flex-shrink: 0;
        }
        
        .product-details h4 {
            font-size: 1.1rem;
            margin-bottom: 8px;
        }
        
        .product-details p {
            color: #71717a;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }
        
        .product-features {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .feature-tag {
            padding: 4px 12px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 20px;
            font-size: 0.75rem;
            color: #10b981;
        }
        
        /* Price Breakdown */
        .price-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            color: #a1a1aa;
        }
        
        .price-row.total {
            padding-top: 20px;
            margin-top: 12px;
            border-top: 2px solid rgba(99, 102, 241, 0.3);
            font-size: 1.3rem;
            font-weight: 800;
            color: #fff;
        }
        
        .price-row.total span:last-child {
            color: #10b981;
        }
        
        .old-price-inline {
            text-decoration: line-through;
            color: #52525b;
            font-size: 0.9rem;
        }
        
        /* Invoice Preview */
        .invoice-preview {
            margin-top: 24px;
            padding: 20px;
            background: rgba(99, 102, 241, 0.05);
            border: 1px dashed rgba(99, 102, 241, 0.3);
            border-radius: 16px;
        }
        
        .invoice-preview h5 {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            color: #6366f1;
            margin-bottom: 16px;
        }
        
        .invoice-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 0.9rem;
            color: #71717a;
        }
        
        .invoice-row span:last-child {
            color: #e4e4e7;
        }
        
        /* Guarantee */
        .guarantee-box {
            margin-top: 24px;
            padding: 20px;
            background: rgba(16, 185, 129, 0.08);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 16px;
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .guarantee-box i {
            font-size: 2rem;
            color: #10b981;
        }
        
        .guarantee-box div h5 {
            font-size: 1rem;
            color: #10b981;
            margin-bottom: 4px;
        }
        
        .guarantee-box div p {
            font-size: 0.85rem;
            color: #71717a;
        }
        
        /* Payment Methods Display */
        .payment-methods-display {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .pm-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            color: #a1a1aa;
            font-size: 0.85rem;
        }
        
        /* Moyasar Styling */
        #moyasar-form {
            direction: ltr;
        }
        
        .mysr-form input {
            background: rgba(255, 255, 255, 0.03) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            border-radius: 14px !important;
            color: #fff !important;
            padding: 16px !important;
            font-size: 16px !important;
        }
        
        .mysr-form input:focus {
            border-color: #6366f1 !important;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.15) !important;
        }
        
        .mysr-form .mysr-form-button {
            background: linear-gradient(135deg, #6366f1, #8b5cf6) !important;
            border: none !important;
            border-radius: 14px !important;
            padding: 18px !important;
            font-size: 18px !important;
            font-weight: 700 !important;
            width: 100% !important;
            margin-top: 16px !important;
        }
        
        /* Security Badges */
        .security-badges {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-top: 24px;
        }
        
        .security-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #71717a;
            font-size: 0.85rem;
        }
        
        .security-badge i {
            color: #10b981;
        }
        
        /* Back Link */
        .back-link {
            text-align: center;
            margin-top: 32px;
        }
        
        .back-link a {
            color: #71717a;
            font-size: 0.95rem;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: color 0.3s;
        }
        
        .back-link a:hover {
            color: #6366f1;
        }
        
        /* Hidden */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="checkout-wrapper">
        <div class="checkout-header">
            <div class="logo">
                <span class="ai">AI</span>ZONIQ
            </div>
            <p>Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù…Ù†Ø©</p>
        </div>
        
        <!-- Progress Steps -->
        <div class="progress-steps">
            <div class="step active" id="step1-indicator">
                <div class="step-circle">1</div>
                <span class="step-label">Ø¨ÙŠØ§Ù†Ø§ØªÙƒ</span>
            </div>
            <div class="step" id="step2-indicator">
                <div class="step-circle">2</div>
                <span class="step-label">Ø§Ù„Ø¯ÙØ¹</span>
            </div>
            <div class="step" id="step3-indicator">
                <div class="step-circle">3</div>
                <span class="step-label">ØªØ£ÙƒÙŠØ¯</span>
            </div>
        </div>
        
        <div class="checkout-grid">
            <!-- Step 1: Customer Info -->
            <div class="checkout-card" id="customer-section">
                <h3 class="card-title">
                    <i class="fas fa-user"></i>
                    <span>Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©</span>
                </h3>
                
                <form id="customer-form">
                    <div class="form-group">
                        <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ <span class="required">*</span></label>
                        <input type="text" class="form-input" id="full-name" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ" required>
                        <span class="error-text">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ (3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)</span>
                    </div>
                    
                    <div class="form-group">
                        <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ <span class="required">*</span></label>
                        <input type="email" class="form-input" id="email" placeholder="example@email.com" required>
                        <span class="error-text">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­</span>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ <span class="required">*</span></label>
                            <input type="tel" class="form-input" id="phone" placeholder="05xxxxxxxx" required>
                            <span class="error-text">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ ØµØ­ÙŠØ­</span>
                        </div>
                        <div class="form-group">
                            <label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</label>
                            <input type="text" class="form-input" id="city" placeholder="Ø§Ù„Ø±ÙŠØ§Ø¶">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>ÙƒÙŠÙ Ø³Ù…Ø¹Øª Ø¹Ù†Ø§ØŸ</label>
                        <select class="form-input" id="source">
                            <option value="">Ø§Ø®ØªØ±...</option>
                            <option value="twitter">ØªÙˆÙŠØªØ± / X</option>
                            <option value="instagram">Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…</option>
                            <option value="tiktok">ØªÙŠÙƒ ØªÙˆÙƒ</option>
                            <option value="youtube">ÙŠÙˆØªÙŠÙˆØ¨</option>
                            <option value="friend">ØµØ¯ÙŠÙ‚ / Ù…Ø¹Ø§Ø±Ù</option>
                            <option value="google">Ø¨Ø­Ø« Ù‚ÙˆÙ‚Ù„</option>
                            <option value="other">Ø£Ø®Ø±Ù‰</option>
                        </select>
                    </div>
                    
                    <button type="button" class="btn-next" onclick="proceedToPayment()">
                        <span>Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ù„Ø¯ÙØ¹</span>
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </form>
            </div>
            
            <!-- Step 2: Payment -->
            <div class="checkout-card hidden" id="payment-section">
                <h3 class="card-title">
                    <i class="fas fa-credit-card"></i>
                    <span>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</span>
                </h3>
                
                <div class="payment-methods-display">
                    <div class="pm-item"><i class="fas fa-credit-card"></i> Ù…Ø¯Ù‰</div>
                    <div class="pm-item"><i class="fab fa-cc-visa"></i> Visa</div>
                    <div class="pm-item"><i class="fab fa-cc-mastercard"></i> Mastercard</div>
                    <div class="pm-item"><i class="fab fa-apple-pay"></i> Apple Pay</div>
                </div>
                
                <div style="margin-top: 32px;">
                    <div id="moyasar-form"></div>
                </div>
                
                <div class="security-badges">
                    <div class="security-badge">
                        <i class="fas fa-lock"></i> ØªØ´ÙÙŠØ± SSL 256-bit
                    </div>
                    <div class="security-badge">
                        <i class="fas fa-shield-halved"></i> PCI DSS Ù…Ø¹ØªÙ…Ø¯
                    </div>
                </div>
                
                <button type="button" class="btn-back" onclick="backToInfo()">
                    <i class="fas fa-arrow-right"></i>
                    <span>Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</span>
                </button>
            </div>
            
            <!-- Order Summary -->
            <div class="checkout-card">
                <h3 class="card-title">
                    <i class="fas fa-shopping-bag"></i>
                    <span>Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨</span>
                </h3>
                
                <div class="order-product">
                    <div class="product-icon">ğŸ“˜</div>
                    <div class="product-details">
                        <h4>Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… AI</h4>
                        <p>Ù„Ø¨Ù†Ø§Ø¡ Ù…ÙˆØ§Ù‚Ø¹ØŒ ØªØ·Ø¨ÙŠÙ‚Ø§ØªØŒ Ø£Ù†Ø¸Ù…Ø© ÙˆØ¨Ø²Ù†Ø³Ùƒ</p>
                        <div class="product-features">
                            <span class="feature-tag">PDF Ø´Ø§Ù…Ù„</span>
                            <span class="feature-tag">ÙˆØµÙˆÙ„ Ù…Ø¯Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©</span>
                            <span class="feature-tag">Ø¯Ø¹Ù… ÙˆØ§ØªØ³Ø§Ø¨</span>
                        </div>
                    </div>
                </div>
                
                <div class="price-row">
                    <span>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ</span>
                    <span class="old-price-inline">599 Ø±.Ø³</span>
                </div>
                <div class="price-row">
                    <span>Ø§Ù„Ø®ØµÙ… (50%)</span>
                    <span style="color: #10b981;">-300 Ø±.Ø³</span>
                </div>
                <div class="price-row total">
                    <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
                    <span>299 Ø±.Ø³</span>
                </div>
                
                <!-- Invoice Preview -->
                <div class="invoice-preview">
                    <h5><i class="fas fa-file-invoice"></i> Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h5>
                    <div class="invoice-row">
                        <span>Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©</span>
                        <span id="invoice-number">-</span>
                    </div>
                    <div class="invoice-row">
                        <span>Ø§Ù„ØªØ§Ø±ÙŠØ®</span>
                        <span id="invoice-date">-</span>
                    </div>
                    <div class="invoice-row">
                        <span>Ø§Ù„Ø§Ø³Ù…</span>
                        <span id="invoice-name">-</span>
                    </div>
                    <div class="invoice-row">
                        <span>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„</span>
                        <span id="invoice-email">-</span>
                    </div>
                </div>
                
                <div class="guarantee-box">
                    <i class="fas fa-shield-check"></i>
                    <div>
                        <h5>Ø¶Ù…Ø§Ù† Ø§Ø³ØªØ±Ø¯Ø§Ø¯ 100%</h5>
                        <p>Ø¥Ø°Ø§ Ø§Ù„Ø¯Ù„ÙŠÙ„ Ù…Ø§ Ù†Ø§Ø³Ø¨ÙƒØŒ Ø§Ø³ØªØ±Ø¯ ÙÙ„ÙˆØ³Ùƒ Ø®Ù„Ø§Ù„ 7 Ø£ÙŠØ§Ù…</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="back-link">
            <a href="../services/services.html">
                <i class="fas fa-arrow-right"></i>
                Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØµÙØ­Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª
            </a>
        </div>
    </div>
    
    <script>
        // ========================================
        // CHECKOUT SYSTEM
        // ========================================
        
        // Generate invoice number
        const invoiceNumber = 'INV-' + Date.now().toString(36).toUpperCase();
        document.getElementById('invoice-number').textContent = invoiceNumber;
        
        // Set current date
        const now = new Date();
        const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('invoice-date').textContent = now.toLocaleDateString('ar-SA', dateOptions);
        
        // Store customer data
        let customerData = {};
        
        // Real-time invoice update
        document.getElementById('full-name').addEventListener('input', function() {
            document.getElementById('invoice-name').textContent = this.value || '-';
        });
        
        document.getElementById('email').addEventListener('input', function() {
            document.getElementById('invoice-email').textContent = this.value || '-';
        });
        
        // Validation
        function validateForm() {
            let isValid = true;
            
            const name = document.getElementById('full-name');
            const email = document.getElementById('email');
            const phone = document.getElementById('phone');
            
            // Reset
            document.querySelectorAll('.form-group').forEach(g => g.classList.remove('error'));
            
            // Name
            if (!name.value.trim() || name.value.trim().length < 3) {
                name.closest('.form-group').classList.add('error');
                isValid = false;
            }
            
            // Email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email.value)) {
                email.closest('.form-group').classList.add('error');
                isValid = false;
            }
            
            // Phone
            const phoneRegex = /^(05|5|9665)[0-9]{8}$/;
            if (!phoneRegex.test(phone.value.replace(/\s/g, ''))) {
                phone.closest('.form-group').classList.add('error');
                isValid = false;
            }
            
            return isValid;
        }
        
        // Proceed to payment
        function proceedToPayment() {
            if (!validateForm()) return;
            
            customerData = {
                name: document.getElementById('full-name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                city: document.getElementById('city').value,
                source: document.getElementById('source').value,
                invoiceNumber: invoiceNumber,
                date: new Date().toISOString()
            };
            
            localStorage.setItem('aizoniq_customer', JSON.stringify(customerData));
            
            // Update steps
            document.getElementById('step1-indicator').classList.remove('active');
            document.getElementById('step1-indicator').classList.add('completed');
            document.getElementById('step2-indicator').classList.add('active');
            
            // Switch sections
            document.getElementById('customer-section').classList.add('hidden');
            document.getElementById('payment-section').classList.remove('hidden');
            
            initMoyasar();
        }
        
        // Back to info
        function backToInfo() {
            document.getElementById('step1-indicator').classList.add('active');
            document.getElementById('step1-indicator').classList.remove('completed');
            document.getElementById('step2-indicator').classList.remove('active');
            
            document.getElementById('customer-section').classList.remove('hidden');
            document.getElementById('payment-section').classList.add('hidden');
        }
        
        // Initialize Moyasar
        function initMoyasar() {
            document.getElementById('moyasar-form').innerHTML = '';
            
            Moyasar.init({
                element: '#moyasar-form',
                publishable_api_key: 'pk_test_YOUR_MOYASAR_API_KEY',
                amount: 29900,
                currency: 'SAR',
                description: 'Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… AI - AIZONIQ',
                callback_url: window.location.origin + '/pages/checkout/success.html',
                methods: ['creditcard', 'applepay', 'stcpay'],
                metadata: {
                    customer_name: customerData.name,
                    customer_email: customerData.email,
                    customer_phone: customerData.phone,
                    customer_city: customerData.city,
                    invoice_number: customerData.invoiceNumber,
                    source: customerData.source
                },
                apple_pay: {
                    country: 'SA',
                    label: 'AIZONIQ Academy',
                    validate_merchant_url: 'https://api.moyasar.com/v1/applepay/initiate'
                },
                on_completed: function(payment) {
                    customerData.paymentId = payment.id;
                    customerData.paymentStatus = payment.status;
                    localStorage.setItem('aizoniq_customer', JSON.stringify(customerData));
                },
                on_failure: function(error) {
                    alert('ÙØ´Ù„ Ø§Ù„Ø¯ÙØ¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                }
            });
        }
    </script>
</body>
</html>
